// SPDX-License-Identifier: GPL-2.0

cxl-create-region(1)
====================

NAME
----
cxl-create-region - Assemble a CXL region by setting up attributes of its
constituent CXL memdevs.

SYNOPSIS
--------
[verse]
'cxl create-region [<options>]'

include::region-description.txt[]

For create-region, a size can optionally be specified, but if not, the maximum
possible size for each memdev will be used up to the available decode capacity
in the system for the given memory type. For persistent regions a UUID can
optionally be specified, but if not, one will be generated.

If the region-creation operation is successful, a region object will be
emitted on stdout in JSON format (see examples). If the specified arguments
cannot be satisfied with a legal configuration, then an appropriate error will
be emitted on stderr.

EXAMPLE
-------
----
# cxl create-region -m -d decoder0.1 -w 2 -g 1024 mem0 mem1
{
  "region":"region0",
  "resource":"0xc90000000",
  "size":"512.00 MiB (536.87 MB)",
  "interleave_ways":2,
  "interleave_granularity":1024,
  "mappings":[
    {
      "position":1,
      "decoder":"decoder4.0"
    },
    {
      "position":0,
      "decoder":"decoder3.0"
    }
  ]
}
created 1 region
----

OPTIONS
-------
<target(s)>::
The CXL targets that should be used to form the region. This is optional,
as they can be chosen automatically based on other options chosen. The number of
'target' arguments must match the '--interleave-ways' option (if provided). The
targets may be memdevs, or endpoints. The options below control what type of
targets are being used.

-m::
--memdevs::
	Indicate that the non-option arguments for 'target(s)' refer to memdev
	names.

-e::
--ep-decoders::
	Indicate that the non-option arguments for 'target(s)' refer to endpoint
	decoder names.

-s::
--size=::
	Specify the total size for the new region. This is optional, and by
	default, the maximum possible size will be used.

-t::
--type=::
	Specify the region type - 'pmem' or 'ram'. Defaults to 'pmem'.

-U::
--uuid=::
	Specify a UUID for the new region. This shouldn't usually need to be
	specified, as one will be generated by default.

-w::
--interleave-ways=::
	The number of interleave ways for the new region's interleave. This
	should be equal to the number of memdevs specified in --memdevs, if
	--memdevs is being supplied. If --memdevs is not specified, an
	appropriate number of memdevs will be chosen based on the number of
	interleave-ways specified.

-g::
--interleave-granularity=::
	The interleave granularity, for the new region's interleave.

-d::
--decoder=::
	The root decoder that the region should be created under. If not
	supplied, the first cross-host bridge (if available), decoder that
	supports the largest interleave will be chosen.

include::human-option.txt[]

include::debug-option.txt[]

include::../copyright.txt[]

SEE ALSO
--------
linkcxl:cxl-list[1],
